CREATE TABLE M_ENV (M_ENV_ID INTEGER PRIMARY KEY, NAME TEXT UNIQUE NOT NULL);
CREATE TABLE M_VERSION (M_VERSION_ID INTEGER PRIMARY KEY, M_ENV_ID INTEGER NOT NULL, LOAD_DATE INTEGER NOT NULL DEFAULT ((strftime('%s', 'now'))));
CREATE INDEX M_VERSION_IDX ON M_VERSION (LOAD_DATE, M_ENV_ID);
CREATE TABLE M_OBJECT (M_OBJECT_ID INTEGER PRIMARY KEY, SCHEMA TEXT NOT NULL, NAME TEXT NOT NULL, TYPE TEXT NOT NULL, CREATE_DATE INTEGER NOT NULL DEFAULT ((strftime('%s', 'now'))));
CREATE UNIQUE INDEX m_object_idx ON m_object (schema, name, type);
CREATE INDEX M_OBJECT_CRT_IDX ON M_OBJECT (CREATE_DATE);
CREATE TABLE M_COLUMN (M_COLUMN_ID INTEGER PRIMARY KEY, M_OBJECT_DETAIL_ID INTEGER NOT NULL, M_COLUMN_OBJ_ID INTEGER NOT NULL, SORT INTEGER, TYPE TEXT, PK INTEGER);
CREATE UNIQUE INDEX M_COLUMN_IDX ON M_COLUMN (M_OBJECT_DETAIL_ID, M_COLUMN_OBJ_ID, SORT);
CREATE INDEX M_COLUMN_OBJ_IDX ON M_COLUMN (M_COLUMN_OBJ_ID);
CREATE TABLE M_OBJECT_DETAIL (M_OBJECT_DETAIL_ID INTEGER PRIMARY KEY, M_OBJECT_ID INTEGER NOT NULL, M_VERSION_ID INTEGER NOT NULL, IDX_TABLE_ID INTEGER, M_UNIQUE INTEGER, STATUS TEXT, ENABLED INTEGER, DROPED INTEGER DEFAULT (0));
CREATE UNIQUE INDEX M_OBJECT_DETAIL_IDX ON M_OBJECT_DETAIL (M_OBJECT_ID, M_VERSION_ID);
CREATE INDEX M_OBJECT_DETAIL_TBL_IDX ON M_OBJECT_DETAIL (IDX_TABLE_ID, M_VERSION_ID);
CREATE INDEX M_OBJECT_DETAIL_UNQ_IDX ON M_OBJECT_DETAIL (M_UNIQUE, ENABLED, STATUS);
CREATE INDEX M_OBJECT_DETAIL_VRS_IDX ON M_OBJECT_DETAIL (M_VERSION_ID);
CREATE INDEX m_object_lower_idx ON M_OBJECT (lower(NAME), lower(SCHEMA));
CREATE TABLE M_ENTITY (M_ENTITY_ID INTEGER PRIMARY KEY, M_PACKAGE TEXT (20) NOT NULL, M_FILE TEXT NOT NULL, M_CLASS TEXT NOT NULL, IS_M_TABLE INTEGER NOT NULL DEFAULT (0), IS_META_DB INTEGER NOT NULL DEFAULT (0), M_PARENT TEXT);
